package com.mysite{	import flash.display.MovieClip;	import flash.text.TextField;	import flash.display.Stage;	import flash.events.MouseEvent;	import flash.events.KeyboardEvent;	import flash.ui.Keyboard;	import flash.events.Event;		import fl.transitions.easing.*;	import fl.transitions.Tween;	// Tasklist ////////////////////	/**			1. Поменять цвет у текущего элемента	2. Добавлять эффекты	3. Отформатировать текст	4. geom.Transform 	**/	public class MenuPages extends MovieClip	{		// menu customizer		var txt:Array = ["new game","options","navigation", "exit"]				// fx customizer		var fxstime:int = 3;		var defaultSize:int = 1;		var customSize:Number = 1.5;		var menuItem:Array = new Array;		var txtItem:Array = new Array;		var txtlength = txt.length;		var txtField:TextField;		var currentIndex:int = 0;		public function MenuPages() 		{			// constructor code			this.addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);			/*			всё очевидно			в конструкторе stage всегда будет null, потому что сперва 			объект создаётся, и только потом уже добавляется на сцену			тебе в конструкторе надо не к stage обращаться, а подписаться			на добавление на сцену this.addEventListener(Event.ADDED_TO_STAGE,			onAddedToStage); и в onAddedToStage убрать слушатель и вызвать 			уже это: menuBuilder(); 			stage.addEventListener(KeyboardEvent.KEY_DOWN,navigation);			*/		}		public function onAddedToStage(e:Event)		{			stage.addEventListener(KeyboardEvent.KEY_DOWN,navigation);			menuBuilder();		}		public function menuBuilder():void		{			trace (txt.length);			for(var i:int = 0; i<txtlength; i++)			{				menuItem[i] = new Circle();				menuItem[i].name = "circle" + i;				menuItem[i].x = stage.stageWidth/2;				menuItem[i].y = 100 + 100 * i;				addChild(menuItem[i]);				txtItem[i] = new TextField;				txtItem[i].text = txt[i];				menuItem[i].addChild(txtItem[i]);				defaultIndex();			}		}		public function navigation(e:KeyboardEvent):void		{			// keyCode			//trace("You pressed key: " + e.keyCode.toString());			if(e.keyCode == 38 && currentIndex > 0)			{				updateCurrent(currentIndex -1)				trace(currentIndex);			} else 			if (e.keyCode == 40 && currentIndex < txtlength-1)			{					trace(txt.length);				updateCurrent(currentIndex +1)				trace(currentIndex);			} else			if(e.keyCode == 13)			{				switch (currentIndex)				{					case 0:							trace("case: "+currentIndex)							break;					case 1:							trace("case: "+currentIndex)							break;					case 2: 							trace("case: "+currentIndex)							break;				}			}		}		public function updateCurrent(newIndex):void		{			nofxs();			currentIndex = newIndex;			fxs();		}		public function fxs():void		{			var scalesBoxX:Tween = new Tween(menuItem[currentIndex],"scaleX", Elastic.easeOut, defaultSize, customSize, fxstime, true);			var scalesBoxY:Tween = new Tween(menuItem[currentIndex],"scaleY", Elastic.easeOut, defaultSize, customSize, fxstime, true);		}		public function nofxs():void		{			var scalesBoxX:Tween = new Tween(menuItem[currentIndex],"scaleX", Elastic.easeOut, customSize, defaultSize, fxstime, true);			var scalesBoxY:Tween = new Tween(menuItem[currentIndex],"scaleY", Elastic.easeOut, customSize, defaultSize, fxstime, true);		}		public function defaultIndex():void		{			fxs();		}	}	}